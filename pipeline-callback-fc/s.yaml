edition: 3.0.0
name: pipeline-callback-fc
access: "default"

vars:
  # 首先，将环境变量赋值给本地变量，并指定默认值
  region: ${env(FC_REGION, "cn-beijing")}  # 确保有默认值
  serviceName: ${env(FC_NAME)}
  memorySize: ${env(FC_MEMORY_SIZE, "128")}  # 数值默认值也用引号包裹
  timeout: ${env(FC_TIMEOUT, "30")}
  internetAccess: ${env(FC_INTERNET_ACCESS, "true")}

resources:
  function:
    component: fc3
    props:
      region: ${vars.region}  # 然后，通过 vars. 引用本地变量
      service:
        name: ${vars.serviceName}
      function:
        name: callback-handler
        runtime: python3.9
        code: ./
        handler: index.handler
        memorySize: ${vars.memorySize}  # 引用本地变量
        timeout: ${vars.timeout}
        # ... 其他配置保持不变
